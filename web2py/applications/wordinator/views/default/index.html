{{extend 'layout.html'}}

{{block head}}
{{end}}
<!-- <script src="{{=URL('static', 'js/vue.js')}}"></script> -->
<head>
<script>
    var get_words_url = "{{=URL('api', 'get_words')}}";
    var get_word_url = "{{=URL('api', 'get_word')}}";
    var submit_url = "{{=URL('api', 'submit_word')}}";

     /**
     * Shuffles array in place. ES6 version
     * @param {Array} a items An array containing the items.
     */
    function shuffle(a) {
        for (let i = a.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [a[i], a[j]] = [a[j], a[i]];
        }
        return a;
    }

    const run_get_words = () => {
        let word_array = [];
        $.get(get_word_url, {list_id:4}, (result) => {
            $("#quiz_word").html(result[0].word);
            word_array.push(result[0].definition);
            // console.log(result[0].word);
        });
        console.log("word_array" ,word_array);

        for(let i = 1; i < 5; i++)
        {
            $.get(get_word_url, {list_id:4}, (result) => {
                // console.log("Getting result");
                // word_array[i] = $(`#word${i}`).html(result[0].definition);
                word_array.push(result[0].definition);
            });
        }
        console.log("word_array ", word_array);
        shuffle(word_array);
        console.log("after shuffle: ", word_array);
        // console.log("word_array ", word_array);
        // console.log("word_array[1] ", word_array[1]);
        for(let i = 0; i < word_array.length; i++) {
            $(`#word${i}`).html(word_array[i]);
        }

        // $.get(get_words_url, {count:6}, (result) => {
        //     console.log("result ", result[0].word);
        //     $("#word2").html(result[0].word);
        //     // $("#word1").value = result[1][0];
        //     // $("#word3").value = result[2][0];
        //     // $("#word4").value = result[3][0];
        //     // $("#word5").value = result[4][0];
        //     // $("#quiz_word").value = result[5][0];
        // });
    }

    $(document).ready(() => {
        console.log("ready!");
        run_get_words();
    });

    const submit_answer = (n) => {
        var word = $("#quiz_word").text();
        console.log("Word is: ", word);

        // $.get(submit_url, {}, (result) => {
            // console.log(result[0]);
        // });
    }

</script>
</head>
<body>
    <div class="main_content">

        <div class="quiz-container">
            <div class="instructions">
                Choose the correct translation for the word.
            </div>
            <div class="quiz-box">
                <form>
                    <h4 id="quiz_word">Word:</h4>
                    <ul class="flex-outer">
                        <!-- pull definitions -->
                        <li>
                            <button id="word1" onclick="submit_answer(1)"></button>
                        </li>
                        <li>
                            <button id="word2" onclick="submit_answer(2)"></button>
                        </li>
                        <li>
                            <button id="word3" onclick="submit_answer(3)"></button>
                        </li>
                        <li>
                            <button id="word4" onclick="submit_answer(4)"></button>
                        </li>
                        <li>
                            <button id="word5" onclick="submit_answer(5)"></button>
                        </li>
                        <!-- <li>
                            <button id="submit" type="submit" onclick="submit_answer();">Submit</button>
                        </li> -->
                    </ul>
                </form>
            </div>
        </div>
    </div>
</body>
  <!-- ################## Reload the page on comment add ###########################3 -->
<!-- <script src="{{=URL('static', 'js/default_index.js')}}"></script> -->
