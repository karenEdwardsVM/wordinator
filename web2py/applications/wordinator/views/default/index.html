{{extend 'layout.html'}}

{{block head}}
{{end}}
<!-- <script src="{{=URL('static', 'js/vue.js')}}"></script> -->
<head>
<script>
    var get_words_url = "{{=URL('api', 'get_words')}}";
    var get_word_url = "{{=URL('api', 'get_word')}}";
    var submit_url = "{{=URL('api', 'submit_word')}}";

    function shuffle(a) {
        var j, x, i;
        for (i = a.length - 1; i > 0; i--) {
            j = Math.floor(Math.random() * (i + 1));
            x = a[i];
            a[i] = a[j];
            a[j] = x;
        }
        return a;
    }

    const run_get_words = () => {
        $.get(get_words_url, {count: 6, list_id: 2}, (result) => {
            result = JSON.parse(result);
            let word_array = []

            console.log("WA", word_array)
  
            $("#quiz_word").html(result[0].word);

            for(let i = 0; i < result.length; i++) {
                word_array.push(result[i].definition)
            }

            console.log("word_array ", word_array);

            //word_array = shuffle(word_array);

            console.log("after shuffle: ", word_array);

            for(let i = 0; i < word_array.length; i++) {
                $(`#word${i}`).html(word_array[i]);
            }
        });
    };

    $(document).ready(() => {
        console.log("ready!");
        run_get_words();
    });

    const submit_answer = (n) => {
        var word = $("#quiz_word").text();
        console.log("Word is: ", word);

        // $.get(submit_url, {}, (result) => {
            // console.log(result[0]);
        // });
    }

</script>
</head>
<body>
    <div class="main_content">

        <div class="quiz-container">
            <div class="instructions">
                Choose the correct translation for the word.
            </div>
            <div class="quiz-box">
                <form>
                    <h4 id="quiz_word">Word:</h4>
                    <ul class="flex-outer">
                        <!-- pull definitions -->
                        <li>
                            <button id="word1" onclick="submit_answer(1)"></button>
                        </li>
                        <li>
                            <button id="word2" onclick="submit_answer(2)"></button>
                        </li>
                        <li>
                            <button id="word3" onclick="submit_answer(3)"></button>
                        </li>
                        <li>
                            <button id="word4" onclick="submit_answer(4)"></button>
                        </li>
                        <li>
                            <button id="word5" onclick="submit_answer(5)"></button>
                        </li>
                        <!-- <li>
                            <button id="submit" type="submit" onclick="submit_answer();">Submit</button>
                        </li> -->
                    </ul>
                </form>
            </div>
        </div>
    </div>
</body>
  <!-- ################## Reload the page on comment add ###########################3 -->
<!-- <script src="{{=URL('static', 'js/default_index.js')}}"></script> -->
