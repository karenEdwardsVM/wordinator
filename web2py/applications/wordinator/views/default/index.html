{{extend 'layout.html'}}

{{block head}}
{{end}}
<!-- <script src="{{=URL('static', 'js/vue.js')}}"></script> -->
<head>
<script>
    var get_words_url = "{{=URL('api', 'get_words')}}";
    var get_word_url = "{{=URL('api', 'get_word')}}";
    var first_word = "";
    var word_array = [];

    function shuffle(a) {
        var j, x, i;
        for (i = a.length - 1; i > 0; i--) {
            j = Math.floor(Math.random() * (i + 1));
            x = a[i];
            a[i] = a[j];
            a[j] = x;
        }
        return a;
    }

    const run_get_words = () => {
        $.get(get_words_url, {count:6, list_id:4}, (result) => {
            result = JSON.parse(result);

            first_word = result[0].definition;
            $("#quiz_word").html(result[0].word);

            for(let i = 0; i < result.length; i++) {
                word_array.push(result[i].definition)
            }
            word_array = shuffle(word_array);

            for(let i = 0; i < word_array.length; i++) {
                let element = (
                    `<li>
                        <button onclick="submit_answer(${i});">
                            ${word_array[i]}
                        </button>
                    </li>`
                );
                $(`#word-box`).append(element);
            }
        });
    };

    $(document).ready(() => {
        console.log("ready!");
        run_get_words();
    });

    const submit_answer = (n) => {
        console.log("Word is: ", first_word);
        console.log("Answer is: ", word_array[n]);
        if(word_array[n] == first_word) {
            console.log("Correct");
        } else {
            console.log("Incorrect");
        }
    }

</script>
</head>
<body>
    <div class="main_content">

        <div class="quiz-container">
            <div class="instructions">
                Choose the correct translation for the word.
            </div>
            <div class="quiz-box">
                <form>
                    <h4 id="quiz_word">Word:</h4>
                    <ul class="flex-outer" id="word-box">
                        <!-- pull definitions -->
                    </ul>
                </form>
            </div>
        </div>
    </div>
</body>
  <!-- ################## Reload the page on comment add ###########################3 -->
<!-- <script src="{{=URL('static', 'js/default_index.js')}}"></script> -->
